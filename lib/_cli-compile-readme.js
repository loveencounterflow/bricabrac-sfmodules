(function() {
  'use strict';
  var FS, PATH, append, base_path, clear, debug, file_has_uncommitted_changes, join, line, log, main_path, resolve, rpr, spawnSync, src_path, target_path, walk_lines_with_positions, warn, x;

  //===========================================================================================================
  FS = require('node:fs');

  PATH = require('node:path');

  ({resolve, join} = PATH);

  // { matchesGlob,          } = require
  ({walk_lines_with_positions} = (require('./unstable-fast-linereader-brics')).require_fast_linereader());

  ({warn, log, debug} = console);

  ({rpr} = (require('./loupe-brics')).require_loupe());

  ({spawnSync} = require('node:child_process'));

  /*
  base_path = PATH.resolve PATH.join __dirname, '..'
  pattern   = '*.md'
  entries   = FS.readdirSync base_path, { recursive: true, }
  entries.sort()
  for entry in entries
    continue unless ( FS.statSync entry ).isFile()
    continue unless PATH.matchesGlob entry, pattern
    debug 'Ωcrmmd___1', entry
  */
  //-----------------------------------------------------------------------------------------------------------
  file_has_uncommitted_changes = function(path) {
    var status;
    ({status} = spawnSync('git', ['diff', '--quiet', path], {
      cwd: base_path
    }));
    if (status === 0) {
      return false;
    }
    return true;
  };

  //-----------------------------------------------------------------------------------------------------------
  clear = function(path) {
    FS.writeFileSync(path, '');
    return null;
  };

  //-----------------------------------------------------------------------------------------------------------
  append = function(path, text) {
    FS.appendFileSync(path, `${text}\n`);
    return null;
  };

  //===========================================================================================================
  base_path = resolve(join(__dirname, '..'));

  src_path = resolve(join(base_path, 'doc-src'));

  main_path = resolve(src_path, 'main.md');

  target_path = resolve(base_path, 'README.md');

  //===========================================================================================================
  debug('Ωcrmmd___3', {base_path, src_path, main_path});

  //===========================================================================================================
  if (file_has_uncommitted_changes(target_path)) {
    warn();
    warn("target file");
    warn(`  ${target_path}`);
    warn("has uncomitted changes; terminating");
    warn();
    process.exit(111);
  }

  //===========================================================================================================
  clear(target_path);

  for (x of walk_lines_with_positions(main_path)) {
    ({line} = x);
    debug('Ωcrmmd___4', rpr(line));
    append(target_path, line);
  }

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL19jbGktY29tcGlsZS1yZWFkbWUuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBO0VBQUE7QUFBQSxNQUFBLEVBQUEsRUFBQSxJQUFBLEVBQUEsTUFBQSxFQUFBLFNBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxFQUFBLDRCQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsU0FBQSxFQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUEsU0FBQSxFQUFBLFFBQUEsRUFBQSxXQUFBLEVBQUEseUJBQUEsRUFBQSxJQUFBLEVBQUEsQ0FBQTs7O0VBR0EsRUFBQSxHQUE0QixPQUFBLENBQVEsU0FBUjs7RUFDNUIsSUFBQSxHQUE0QixPQUFBLENBQVEsV0FBUjs7RUFDNUIsQ0FBQSxDQUFFLE9BQUYsRUFDRSxJQURGLENBQUEsR0FDNEIsSUFENUIsRUFMQTs7O0VBUUEsQ0FBQSxDQUFFLHlCQUFGLENBQUEsR0FDNEIsQ0FBRSxPQUFBLENBQVEsa0NBQVIsQ0FBRixDQUE4QyxDQUFDLHVCQUEvQyxDQUFBLENBRDVCOztFQUVBLENBQUEsQ0FBRSxJQUFGLEVBQ0UsR0FERixFQUVFLEtBRkYsQ0FBQSxHQUU0QixPQUY1Qjs7RUFHQSxDQUFBLENBQUUsR0FBRixDQUFBLEdBQTRCLENBQUUsT0FBQSxDQUFRLGVBQVIsQ0FBRixDQUEyQixDQUFDLGFBQTVCLENBQUEsQ0FBNUI7O0VBQ0EsQ0FBQSxDQUFFLFNBQUYsQ0FBQSxHQUE0QixPQUFBLENBQVEsb0JBQVIsQ0FBNUIsRUFkQTs7Ozs7Ozs7Ozs7OztFQTZCQSw0QkFBQSxHQUErQixRQUFBLENBQUUsSUFBRixDQUFBO0FBQy9CLFFBQUE7SUFBRSxDQUFBLENBQUUsTUFBRixDQUFBLEdBQWMsU0FBQSxDQUFVLEtBQVYsRUFBaUIsQ0FBRSxNQUFGLEVBQVUsU0FBVixFQUFxQixJQUFyQixDQUFqQixFQUErQztNQUFFLEdBQUEsRUFBSztJQUFQLENBQS9DLENBQWQ7SUFDQSxJQUFnQixNQUFBLEtBQVUsQ0FBMUI7QUFBQSxhQUFPLE1BQVA7O0FBQ0EsV0FBTztFQUhzQixFQTdCL0I7OztFQW1DQSxLQUFBLEdBQVEsUUFBQSxDQUFFLElBQUYsQ0FBQTtJQUNOLEVBQUUsQ0FBQyxhQUFILENBQWlCLElBQWpCLEVBQXVCLEVBQXZCO0FBQ0EsV0FBTztFQUZELEVBbkNSOzs7RUF3Q0EsTUFBQSxHQUFTLFFBQUEsQ0FBRSxJQUFGLEVBQVEsSUFBUixDQUFBO0lBQ1AsRUFBRSxDQUFDLGNBQUgsQ0FBa0IsSUFBbEIsRUFBd0IsQ0FBQSxDQUFBLENBQUcsSUFBSCxDQUFBLEVBQUEsQ0FBeEI7QUFDQSxXQUFPO0VBRkEsRUF4Q1Q7OztFQTZDQSxTQUFBLEdBQWMsT0FBQSxDQUFRLElBQUEsQ0FBSyxTQUFMLEVBQWdCLElBQWhCLENBQVI7O0VBQ2QsUUFBQSxHQUFjLE9BQUEsQ0FBUSxJQUFBLENBQUssU0FBTCxFQUFnQixTQUFoQixDQUFSOztFQUNkLFNBQUEsR0FBYyxPQUFBLENBQVEsUUFBUixFQUFrQixTQUFsQjs7RUFDZCxXQUFBLEdBQWMsT0FBQSxDQUFRLFNBQVIsRUFBbUIsV0FBbkIsRUFoRGQ7OztFQW1EQSxLQUFBLENBQU0sWUFBTixFQUFvQixDQUFFLFNBQUYsRUFBYSxRQUFiLEVBQXVCLFNBQXZCLENBQXBCLEVBbkRBOzs7RUFzREEsSUFBRyw0QkFBQSxDQUE2QixXQUE3QixDQUFIO0lBQ0UsSUFBQSxDQUFBO0lBQ0EsSUFBQSxDQUFLLGFBQUw7SUFDQSxJQUFBLENBQUssR0FBQSxDQUFBLENBQUssV0FBTCxDQUFBLENBQUw7SUFDQSxJQUFBLENBQUsscUNBQUw7SUFDQSxJQUFBLENBQUE7SUFDQSxPQUFPLENBQUMsSUFBUixDQUFhLEdBQWIsRUFORjtHQXREQTs7O0VBK0RBLEtBQUEsQ0FBTSxXQUFOOztFQUNBLEtBQUEseUNBQUE7S0FBSSxDQUFFLElBQUY7SUFDRixLQUFBLENBQU0sWUFBTixFQUFvQixHQUFBLENBQUksSUFBSixDQUFwQjtJQUNBLE1BQUEsQ0FBTyxXQUFQLEVBQW9CLElBQXBCO0VBRkY7QUFoRUEiLCJzb3VyY2VzQ29udGVudCI6WyJcbid1c2Ugc3RyaWN0J1xuXG4jPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbkZTICAgICAgICAgICAgICAgICAgICAgICAgPSByZXF1aXJlICdub2RlOmZzJ1xuUEFUSCAgICAgICAgICAgICAgICAgICAgICA9IHJlcXVpcmUgJ25vZGU6cGF0aCdcbnsgcmVzb2x2ZSxcbiAgam9pbiwgICAgICAgICAgICAgICAgIH0gPSBQQVRIXG4jIHsgbWF0Y2hlc0dsb2IsICAgICAgICAgIH0gPSByZXF1aXJlXG57IHdhbGtfbGluZXNfd2l0aF9wb3NpdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICB9ID0gKCByZXF1aXJlICcuL3Vuc3RhYmxlLWZhc3QtbGluZXJlYWRlci1icmljcycgKS5yZXF1aXJlX2Zhc3RfbGluZXJlYWRlcigpXG57IHdhcm4sXG4gIGxvZyxcbiAgZGVidWcsICAgICAgICAgICAgICAgIH0gPSBjb25zb2xlXG57IHJwciwgICAgICAgICAgICAgICAgICB9ID0gKCByZXF1aXJlICcuL2xvdXBlLWJyaWNzJyApLnJlcXVpcmVfbG91cGUoKVxueyBzcGF3blN5bmMsICAgICAgICAgICAgfSA9IHJlcXVpcmUgJ25vZGU6Y2hpbGRfcHJvY2VzcydcblxuXG4jIyNcbmJhc2VfcGF0aCA9IFBBVEgucmVzb2x2ZSBQQVRILmpvaW4gX19kaXJuYW1lLCAnLi4nXG5wYXR0ZXJuICAgPSAnKi5tZCdcbmVudHJpZXMgICA9IEZTLnJlYWRkaXJTeW5jIGJhc2VfcGF0aCwgeyByZWN1cnNpdmU6IHRydWUsIH1cbmVudHJpZXMuc29ydCgpXG5mb3IgZW50cnkgaW4gZW50cmllc1xuICBjb250aW51ZSB1bmxlc3MgKCBGUy5zdGF0U3luYyBlbnRyeSApLmlzRmlsZSgpXG4gIGNvbnRpbnVlIHVubGVzcyBQQVRILm1hdGNoZXNHbG9iIGVudHJ5LCBwYXR0ZXJuXG4gIGRlYnVnICfOqWNybW1kX19fMScsIGVudHJ5XG4jIyNcblxuIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5maWxlX2hhc191bmNvbW1pdHRlZF9jaGFuZ2VzID0gKCBwYXRoICkgLT5cbiAgeyBzdGF0dXMsIH0gPSBzcGF3blN5bmMgJ2dpdCcsIFsgJ2RpZmYnLCAnLS1xdWlldCcsIHBhdGgsIF0sIHsgY3dkOiBiYXNlX3BhdGgsIH1cbiAgcmV0dXJuIGZhbHNlIGlmIHN0YXR1cyBpcyAwXG4gIHJldHVybiB0cnVlXG5cbiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuY2xlYXIgPSAoIHBhdGggKSAtPlxuICBGUy53cml0ZUZpbGVTeW5jIHBhdGgsICcnXG4gIHJldHVybiBudWxsXG5cbiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuYXBwZW5kID0gKCBwYXRoLCB0ZXh0ICkgLT5cbiAgRlMuYXBwZW5kRmlsZVN5bmMgcGF0aCwgXCIje3RleHR9XFxuXCJcbiAgcmV0dXJuIG51bGxcblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5iYXNlX3BhdGggICA9IHJlc29sdmUgam9pbiBfX2Rpcm5hbWUsICcuLidcbnNyY19wYXRoICAgID0gcmVzb2x2ZSBqb2luIGJhc2VfcGF0aCwgJ2RvYy1zcmMnXG5tYWluX3BhdGggICA9IHJlc29sdmUgc3JjX3BhdGgsICdtYWluLm1kJ1xudGFyZ2V0X3BhdGggPSByZXNvbHZlIGJhc2VfcGF0aCwgJ1JFQURNRS5tZCdcblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5kZWJ1ZyAnzqljcm1tZF9fXzMnLCB7IGJhc2VfcGF0aCwgc3JjX3BhdGgsIG1haW5fcGF0aCwgfVxuXG4jPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmlmIGZpbGVfaGFzX3VuY29tbWl0dGVkX2NoYW5nZXMgdGFyZ2V0X3BhdGhcbiAgd2FybigpXG4gIHdhcm4gXCJ0YXJnZXQgZmlsZVwiXG4gIHdhcm4gXCIgICN7dGFyZ2V0X3BhdGh9XCJcbiAgd2FybiBcImhhcyB1bmNvbWl0dGVkIGNoYW5nZXM7IHRlcm1pbmF0aW5nXCJcbiAgd2FybigpXG4gIHByb2Nlc3MuZXhpdCAxMTFcblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5jbGVhciB0YXJnZXRfcGF0aFxuZm9yIHsgbGluZSwgfSBmcm9tIHdhbGtfbGluZXNfd2l0aF9wb3NpdGlvbnMgbWFpbl9wYXRoXG4gIGRlYnVnICfOqWNybW1kX19fNCcsIHJwciBsaW5lXG4gIGFwcGVuZCB0YXJnZXRfcGF0aCwgbGluZVxuXG5cblxuXG5cblxuIl19
