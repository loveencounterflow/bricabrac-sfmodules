(function() {
  'use strict';
  var BRICS, debug;

  //===========================================================================================================
  ({debug} = console);

  //###########################################################################################################

  //===========================================================================================================
  BRICS = {
    //=========================================================================================================
    /* NOTE Future Single-File Module */
    require_nanotypes_v1: function() {
      var CFG, Type, Typespace, clean_assign, exports, freeze, hide, nameit, remap, rpr, set_getter;
      //=======================================================================================================
      ({freeze} = Object);
      ({clean_assign} = (require('./unstable-object-tools-brics')).require_clean_assign());
      ({hide, set_getter} = (require('./various-brics')).require_managed_property_tools());
      ({nameit} = (require('./various-brics')).require_nameit());
      ({remap} = (require('./unstable-object-tools-brics')).require_remap());
      // { show_no_colors: rpr,  } = ( require './unstable-rpr-type_of-brics' ).require_show()
      ({rpr} = (require('./loupe-brics')).require_loupe());
      // { type_of,              } = SFMODULES.unstable.require_type_of()
      CFG = Symbol.for('cfg');
      //=======================================================================================================
      Type = class Type {
        //-----------------------------------------------------------------------------------------------------
        constructor(typespace, name, isa) {
          hide(this, 'name', name);
          hide(this, 'T', typespace);
          hide(this, '_isa', isa);
          set_getter(this, CFG, () => {
            return this.T[CFG];
          });
          this.data = {}; // new Bounded_list()
          return void 0;
        }

        //-----------------------------------------------------------------------------------------------------
        isa(x, data = null, mapping = null) {
          var R;
          this.data = {};
          R = this._isa.call(this, x);
          //...................................................................................................
          if (data != null) {
            if (mapping != null) {
              clean_assign(data, remap(clean_assign({}, this.data), mapping));
            } else {
              /* d1 m1 */              clean_assign(data, this.data);
            }
          } else /* d1 m0 */if (mapping != null) {
            remap(this.data, mapping);
          }
/* d0 m1 */          return R/* d0 m0 */;
        }

        //-----------------------------------------------------------------------------------------------------
        validate(x, data = null, mapping = null) {
          if (this.isa(x, data, mapping)) {
            return x;
          }
          /* TAINT use better rpr() */
          throw new Error(`Ωbbnt___1 not a valid ${this.name}: ${rpr(x)}`);
        }

        //-----------------------------------------------------------------------------------------------------
        assign(...P) {
          return clean_assign(this.data, ...P);
        }

        //-----------------------------------------------------------------------------------------------------
        fail(message, ...P) {
          clean_assign(this.data, {message}, ...P);
          return false;
        }

      };
      Typespace = (function() {
        //=======================================================================================================
        class Typespace {
          //=====================================================================================================
          constructor(cfg = null) {
            var Typeclass, clasz, i, isa, len, name, ref, ref1;
            clasz = this.constructor;
            this[CFG] = freeze(clean_assign({}, (ref = clasz[CFG]) != null ? ref : void 0, cfg != null ? cfg : void 0));
            ref1 = Object.getOwnPropertyNames(clasz);
            for (i = 0, len = ref1.length; i < len; i++) {
              name = ref1[i];
              Typeclass = class Typeclass extends Type {};
              nameit(name, Typeclass);
              this[name] = new Typeclass(this, name, isa = clasz[name]);
            }
            return void 0;
          }

        };

        //-----------------------------------------------------------------------------------------------------
        Typespace[CFG] = null;

        return Typespace;

      }).call(this);
      //=======================================================================================================
      return exports = {Type, Typespace, CFG};
    },
    //=========================================================================================================
    /* NOTE Future Single-File Module */
    require_nanotypes_v2: function() {
      var CFG, Type, Typespace, clean_assign, exports, freeze, hide, nameit, remap, rpr, set_getter;
      //=======================================================================================================
      ({freeze} = Object);
      ({clean_assign} = (require('./unstable-object-tools-brics')).require_clean_assign());
      ({hide, set_getter} = (require('./various-brics')).require_managed_property_tools());
      ({nameit} = (require('./various-brics')).require_nameit());
      ({remap} = (require('./unstable-object-tools-brics')).require_remap());
      ({
        show_no_colors: rpr
      } = (require('./unstable-rpr-type_of-brics')).require_show());
      // { type_of,              } = SFMODULES.unstable.require_type_of()
      CFG = Symbol.for('cfg');
      Type = (function() {
        //=======================================================================================================
        class Type {
          //-----------------------------------------------------------------------------------------------------
          constructor(typespace, name, isa) {
            hide(this, 'name', name);
            hide(this, 'T', typespace);
            hide(this, '_isa', isa);
            hide(this, 'inputs', {});
            set_getter(this, CFG, () => {
              return this.T[CFG];
            });
            this.data = {};
            return void 0;
          }

          //-----------------------------------------------------------------------------------------------------
          dm_isa(data, mapping, x, ...P) {
            /* Like `Type::isa()`, but capture data and optionally remap it */
            var R;
            R = this.isa(x, ...P);
            //...................................................................................................
            if (data != null) {
              if (mapping != null) {
                clean_assign(data, remap(clean_assign({}, this.data), mapping));
              } else {
                /* d1 m1 */                clean_assign(data, this.data);
              }
            } else /* d1 m0 */if (mapping != null) {
              remap(this.data, mapping);
            }
/* d0 m1 */            return R/* d0 m0 */;
          }

          //-----------------------------------------------------------------------------------------------------
          isa(x, ...P) {
            var R;
            this.data = {};
            this.inputs = {x, ...P};
            R = this._isa.call(this, x, ...P);
            return R;
          }

          // #-----------------------------------------------------------------------------------------------------
          // dm_validate: ( data, mapping, x, P... ) ->
          //   return x if @isa x, P...
          //   message   = "not a valid #{@full_name}: #{rpr x}"
          //   message  += " – #{@data.message}" if @data.message?
          //   throw new Error message

            //-----------------------------------------------------------------------------------------------------
          _get_validation_failure_message(x) {
            var R;
            R = `(${this.full_name}) not a valid ${this.full_name}: ${rpr(x)}`;
            if (this.data.message != null) {
              R += ` – ${this.data.message}`;
            }
            return R;
          }

          //-----------------------------------------------------------------------------------------------------
          dm_validate(data, mapping, x, ...P) {
            if (this.dm_isa(data, mapping, x, ...P)) {
              return x;
            }
            throw new Error(this._get_validation_failure_message(x));
          }

          //-----------------------------------------------------------------------------------------------------
          validate(x, ...P) {
            if (this.isa(x, ...P)) {
              return x;
            }
            throw new Error(this._get_validation_failure_message(x));
          }

          //-----------------------------------------------------------------------------------------------------
          assign(...P) {
            return clean_assign(this.data, ...P);
          }

          //-----------------------------------------------------------------------------------------------------
          fail(message, ...P) {
            clean_assign(this.data, {message}, ...P);
            return false;
          }

        };

        //-----------------------------------------------------------------------------------------------------
        set_getter(Type.prototype, 'full_name', function() {
          if (!(this.inputs[0] instanceof Type)) {
            return this.name;
          }
          return `${this.name} <${this.inputs[0].full_name}>`;
        });

        return Type;

      }).call(this);
      Typespace = (function() {
        //=======================================================================================================
        class Typespace {
          //=====================================================================================================
          constructor(cfg = null) {
            var Typeclass, clasz, i, isa, len, name, ref, ref1;
            clasz = this.constructor;
            this[CFG] = freeze(clean_assign({}, (ref = clasz[CFG]) != null ? ref : void 0, cfg != null ? cfg : void 0));
            ref1 = Object.getOwnPropertyNames(clasz);
            for (i = 0, len = ref1.length; i < len; i++) {
              name = ref1[i];
              Typeclass = class Typeclass extends Type {};
              nameit(name, Typeclass);
              this[name] = new Typeclass(this, name, isa = clasz[name]);
            }
            return void 0;
          }

        };

        //-----------------------------------------------------------------------------------------------------
        Typespace[CFG] = null;

        return Typespace;

      }).call(this);
      //=======================================================================================================
      return exports = {Type, Typespace, CFG};
    }
  };

  //===========================================================================================================
  BRICS.require_nanotypes = BRICS.require_nanotypes_v2;

  Object.assign(module.exports, BRICS);

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3Vuc3RhYmxlLW5hbm90eXBlcy1icmljcy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0E7RUFBQTtBQUFBLE1BQUEsS0FBQSxFQUFBLEtBQUE7OztFQUdBLENBQUEsQ0FBRSxLQUFGLENBQUEsR0FBYSxPQUFiLEVBSEE7Ozs7O0VBU0EsS0FBQSxHQUlFLENBQUE7OztJQUFBLG9CQUFBLEVBQXNCLFFBQUEsQ0FBQSxDQUFBO0FBRXhCLFVBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxTQUFBLEVBQUEsWUFBQSxFQUFBLE9BQUEsRUFBQSxNQUFBLEVBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUEsR0FBQSxFQUFBLFVBQUE7O01BQ0ksQ0FBQSxDQUFFLE1BQUYsQ0FBQSxHQUE0QixNQUE1QjtNQUNBLENBQUEsQ0FBRSxZQUFGLENBQUEsR0FBNEIsQ0FBRSxPQUFBLENBQVEsK0JBQVIsQ0FBRixDQUEyQyxDQUFDLG9CQUE1QyxDQUFBLENBQTVCO01BQ0EsQ0FBQSxDQUFFLElBQUYsRUFDRSxVQURGLENBQUEsR0FDNEIsQ0FBRSxPQUFBLENBQVEsaUJBQVIsQ0FBRixDQUE2QixDQUFDLDhCQUE5QixDQUFBLENBRDVCO01BRUEsQ0FBQSxDQUFFLE1BQUYsQ0FBQSxHQUE0QixDQUFFLE9BQUEsQ0FBUSxpQkFBUixDQUFGLENBQTZCLENBQUMsY0FBOUIsQ0FBQSxDQUE1QjtNQUNBLENBQUEsQ0FBRSxLQUFGLENBQUEsR0FBNEIsQ0FBRSxPQUFBLENBQVEsK0JBQVIsQ0FBRixDQUEyQyxDQUFDLGFBQTVDLENBQUEsQ0FBNUIsRUFOSjs7TUFRSSxDQUFBLENBQUUsR0FBRixDQUFBLEdBQTRCLENBQUUsT0FBQSxDQUFRLGVBQVIsQ0FBRixDQUEyQixDQUFDLGFBQTVCLENBQUEsQ0FBNUIsRUFSSjs7TUFVSSxHQUFBLEdBQTRCLE1BQU0sQ0FBQyxHQUFQLENBQVcsS0FBWCxFQVZoQzs7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RSxDQUFBLEdBQUEsQ0FBRixHQUFROzs7O29CQWpGZDs7QUE4RkksYUFBTyxPQUFBLEdBQVUsQ0FBRSxJQUFGLEVBQVEsU0FBUixFQUFtQixHQUFuQjtJQWhHRztFQXhFdEIsRUFiRjs7O0VBMExBLEtBQUssQ0FBQyxpQkFBTixHQUEwQixLQUFLLENBQUM7O0VBQ2hDLE1BQU0sQ0FBQyxNQUFQLENBQWMsTUFBTSxDQUFDLE9BQXJCLEVBQThCLEtBQTlCO0FBM0xBIiwic291cmNlc0NvbnRlbnQiOlsiXG4ndXNlIHN0cmljdCdcblxuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG57IGRlYnVnLCB9ID0gY29uc29sZVxuXG5cbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuI1xuIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5CUklDUyA9XG5cbiAgIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAjIyMgTk9URSBGdXR1cmUgU2luZ2xlLUZpbGUgTW9kdWxlICMjI1xuICByZXF1aXJlX25hbm90eXBlc192MTogLT5cblxuICAgICM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgeyBmcmVlemUsICAgICAgICAgICAgICAgfSA9IE9iamVjdFxuICAgIHsgY2xlYW5fYXNzaWduLCAgICAgICAgIH0gPSAoIHJlcXVpcmUgJy4vdW5zdGFibGUtb2JqZWN0LXRvb2xzLWJyaWNzJyApLnJlcXVpcmVfY2xlYW5fYXNzaWduKClcbiAgICB7IGhpZGUsXG4gICAgICBzZXRfZ2V0dGVyLCAgICAgICAgICAgfSA9ICggcmVxdWlyZSAnLi92YXJpb3VzLWJyaWNzJyApLnJlcXVpcmVfbWFuYWdlZF9wcm9wZXJ0eV90b29scygpXG4gICAgeyBuYW1laXQsICAgICAgICAgICAgICAgfSA9ICggcmVxdWlyZSAnLi92YXJpb3VzLWJyaWNzJyApLnJlcXVpcmVfbmFtZWl0KClcbiAgICB7IHJlbWFwLCAgICAgICAgICAgICAgICB9ID0gKCByZXF1aXJlICcuL3Vuc3RhYmxlLW9iamVjdC10b29scy1icmljcycgKS5yZXF1aXJlX3JlbWFwKClcbiAgICAjIHsgc2hvd19ub19jb2xvcnM6IHJwciwgIH0gPSAoIHJlcXVpcmUgJy4vdW5zdGFibGUtcnByLXR5cGVfb2YtYnJpY3MnICkucmVxdWlyZV9zaG93KClcbiAgICB7IHJwciwgICAgICAgICAgICAgICAgICB9ID0gKCByZXF1aXJlICcuL2xvdXBlLWJyaWNzJyApLnJlcXVpcmVfbG91cGUoKVxuICAgICMgeyB0eXBlX29mLCAgICAgICAgICAgICAgfSA9IFNGTU9EVUxFUy51bnN0YWJsZS5yZXF1aXJlX3R5cGVfb2YoKVxuICAgIENGRyAgICAgICAgICAgICAgICAgICAgICAgPSBTeW1ib2wuZm9yICdjZmcnXG5cbiAgICAjPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIGNsYXNzIFR5cGVcblxuICAgICAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICBjb25zdHJ1Y3RvcjogKCB0eXBlc3BhY2UsIG5hbWUsIGlzYSApIC0+XG4gICAgICAgIGhpZGUgQCwgJ25hbWUnLCAgICAgbmFtZVxuICAgICAgICBoaWRlIEAsICdUJywgICAgICAgIHR5cGVzcGFjZVxuICAgICAgICBoaWRlIEAsICdfaXNhJywgICAgIGlzYVxuICAgICAgICBzZXRfZ2V0dGVyIEAsIENGRywgID0+IEBUW0NGR11cbiAgICAgICAgQGRhdGEgICAgICAgICAgICAgPSB7fSAjIG5ldyBCb3VuZGVkX2xpc3QoKVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG5cbiAgICAgICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgaXNhOiAoIHgsIGRhdGEgPSBudWxsLCBtYXBwaW5nID0gbnVsbCApIC0+XG4gICAgICAgIEBkYXRhICAgPSB7fVxuICAgICAgICBSICAgICAgID0gQF9pc2EuY2FsbCBALCB4XG4gICAgICAgICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cbiAgICAgICAgaWYgZGF0YT9cbiAgICAgICAgICBpZiBtYXBwaW5nPyAgICAgdGhlbiAgY2xlYW5fYXNzaWduIGRhdGEsICggcmVtYXAgKCBjbGVhbl9hc3NpZ24ge30sIEBkYXRhICksIG1hcHBpbmcgKSAgIyMjIGQxIG0xICMjI1xuICAgICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICBjbGVhbl9hc3NpZ24gZGF0YSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgQGRhdGEgICAgICAgICAgICAgICAjIyMgZDEgbTAgIyMjXG4gICAgICAgIGVsc2UgaWYgbWFwcGluZz8gIHRoZW4gICAgICAgICAgICAgICAgICAgICAgIHJlbWFwICAgICAgICAgICAgICAgICAgICBAZGF0YSwgICBtYXBwaW5nICAgICMjIyBkMCBtMSAjIyNcbiAgICAgICAgcmV0dXJuIFIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyMjIGQwIG0wICMjI1xuXG4gICAgICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgIHZhbGlkYXRlOiAoIHgsIGRhdGEgPSBudWxsLCBtYXBwaW5nID0gbnVsbCApIC0+XG4gICAgICAgIHJldHVybiB4IGlmIEBpc2EgeCwgZGF0YSwgbWFwcGluZ1xuICAgICAgICAjIyMgVEFJTlQgdXNlIGJldHRlciBycHIoKSAjIyNcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yIFwizqliYm50X19fMSBub3QgYSB2YWxpZCAje0BuYW1lfTogI3tycHIgeH1cIlxuXG4gICAgICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgIGFzc2lnbjogKCBQLi4uICkgLT4gY2xlYW5fYXNzaWduIEBkYXRhLCBQLi4uXG5cbiAgICAgICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgZmFpbDogKCBtZXNzYWdlLCBQLi4uICkgLT4gY2xlYW5fYXNzaWduIEBkYXRhLCB7IG1lc3NhZ2UsIH0sIFAuLi47IGZhbHNlXG5cblxuICAgICM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgY2xhc3MgVHlwZXNwYWNlXG5cbiAgICAgICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgQFtDRkddOiBudWxsXG5cbiAgICAgICM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgY29uc3RydWN0b3I6ICggY2ZnID0gbnVsbCApIC0+XG4gICAgICAgIGNsYXN6ICAgPSBAY29uc3RydWN0b3JcbiAgICAgICAgQFtDRkddICA9IGZyZWV6ZSBjbGVhbl9hc3NpZ24ge30sICggY2xhc3pbQ0ZHXSA/IHVuZGVmaW5lZCApLCAoIGNmZyA/IHVuZGVmaW5lZCApXG4gICAgICAgIGZvciBuYW1lIGluIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIGNsYXN6XG4gICAgICAgICAgY2xhc3MgVHlwZWNsYXNzIGV4dGVuZHMgVHlwZVxuICAgICAgICAgIG5hbWVpdCBuYW1lLCBUeXBlY2xhc3NcbiAgICAgICAgICBAWyBuYW1lIF0gPSBuZXcgVHlwZWNsYXNzIEAsIG5hbWUsIGlzYSA9IGNsYXN6WyBuYW1lIF1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuXG4gICAgIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICByZXR1cm4gZXhwb3J0cyA9IHsgVHlwZSwgVHlwZXNwYWNlLCBDRkcsIH1cblxuXG4gICM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgIyMjIE5PVEUgRnV0dXJlIFNpbmdsZS1GaWxlIE1vZHVsZSAjIyNcbiAgcmVxdWlyZV9uYW5vdHlwZXNfdjI6IC0+XG5cbiAgICAjPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIHsgZnJlZXplLCAgICAgICAgICAgICAgIH0gPSBPYmplY3RcbiAgICB7IGNsZWFuX2Fzc2lnbiwgICAgICAgICB9ID0gKCByZXF1aXJlICcuL3Vuc3RhYmxlLW9iamVjdC10b29scy1icmljcycgKS5yZXF1aXJlX2NsZWFuX2Fzc2lnbigpXG4gICAgeyBoaWRlLFxuICAgICAgc2V0X2dldHRlciwgICAgICAgICAgIH0gPSAoIHJlcXVpcmUgJy4vdmFyaW91cy1icmljcycgKS5yZXF1aXJlX21hbmFnZWRfcHJvcGVydHlfdG9vbHMoKVxuICAgIHsgbmFtZWl0LCAgICAgICAgICAgICAgIH0gPSAoIHJlcXVpcmUgJy4vdmFyaW91cy1icmljcycgKS5yZXF1aXJlX25hbWVpdCgpXG4gICAgeyByZW1hcCwgICAgICAgICAgICAgICAgfSA9ICggcmVxdWlyZSAnLi91bnN0YWJsZS1vYmplY3QtdG9vbHMtYnJpY3MnICkucmVxdWlyZV9yZW1hcCgpXG4gICAgeyBzaG93X25vX2NvbG9yczogcnByLCAgfSA9ICggcmVxdWlyZSAnLi91bnN0YWJsZS1ycHItdHlwZV9vZi1icmljcycgKS5yZXF1aXJlX3Nob3coKVxuICAgICMgeyB0eXBlX29mLCAgICAgICAgICAgICAgfSA9IFNGTU9EVUxFUy51bnN0YWJsZS5yZXF1aXJlX3R5cGVfb2YoKVxuICAgIENGRyAgICAgICAgICAgICAgICAgICAgICAgPSBTeW1ib2wuZm9yICdjZmcnXG5cbiAgICAjPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIGNsYXNzIFR5cGVcblxuICAgICAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICBjb25zdHJ1Y3RvcjogKCB0eXBlc3BhY2UsIG5hbWUsIGlzYSApIC0+XG4gICAgICAgIGhpZGUgQCwgJ25hbWUnLCAgICAgICBuYW1lXG4gICAgICAgIGhpZGUgQCwgJ1QnLCAgICAgICAgICB0eXBlc3BhY2VcbiAgICAgICAgaGlkZSBALCAnX2lzYScsICAgICAgIGlzYVxuICAgICAgICBoaWRlIEAsICdpbnB1dHMnLCAgICAge31cbiAgICAgICAgc2V0X2dldHRlciBALCBDRkcsICA9PiBAVFtDRkddXG4gICAgICAgIEBkYXRhICAgICAgICAgICAgID0ge31cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuXG4gICAgICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgIHNldF9nZXR0ZXIgQDo6LCAnZnVsbF9uYW1lJywgLT5cbiAgICAgICAgcmV0dXJuIEBuYW1lIHVubGVzcyBAaW5wdXRzWyAwIF0gaW5zdGFuY2VvZiBUeXBlXG4gICAgICAgIHJldHVybiBcIiN7QG5hbWV9IDwje0BpbnB1dHNbIDAgXS5mdWxsX25hbWV9PlwiXG5cbiAgICAgICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgZG1faXNhOiAoIGRhdGEsIG1hcHBpbmcsIHgsIFAuLi4gKSAtPlxuICAgICAgICAjIyMgTGlrZSBgVHlwZTo6aXNhKClgLCBidXQgY2FwdHVyZSBkYXRhIGFuZCBvcHRpb25hbGx5IHJlbWFwIGl0ICMjI1xuICAgICAgICBSID0gQGlzYSB4LCBQLi4uXG4gICAgICAgICMuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5cbiAgICAgICAgaWYgZGF0YT9cbiAgICAgICAgICBpZiBtYXBwaW5nPyAgICAgdGhlbiAgY2xlYW5fYXNzaWduIGRhdGEsICggcmVtYXAgKCBjbGVhbl9hc3NpZ24ge30sIEBkYXRhICksIG1hcHBpbmcgKSAgIyMjIGQxIG0xICMjI1xuICAgICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICBjbGVhbl9hc3NpZ24gZGF0YSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgQGRhdGEgICAgICAgICAgICAgICAjIyMgZDEgbTAgIyMjXG4gICAgICAgIGVsc2UgaWYgbWFwcGluZz8gIHRoZW4gICAgICAgICAgICAgICAgICAgICAgIHJlbWFwICAgICAgICAgICAgICAgICAgICBAZGF0YSwgICBtYXBwaW5nICAgICMjIyBkMCBtMSAjIyNcbiAgICAgICAgcmV0dXJuIFIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyMjIGQwIG0wICMjI1xuXG4gICAgICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgIGlzYTogKCB4LCBQLi4uICkgLT5cbiAgICAgICAgQGRhdGEgICA9IHt9XG4gICAgICAgIEBpbnB1dHMgPSB7IHgsIFAuLi4sIH1cbiAgICAgICAgUiAgICAgICA9IEBfaXNhLmNhbGwgQCwgeCwgUC4uLlxuICAgICAgICByZXR1cm4gUlxuXG4gICAgICAjICMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgIyBkbV92YWxpZGF0ZTogKCBkYXRhLCBtYXBwaW5nLCB4LCBQLi4uICkgLT5cbiAgICAgICMgICByZXR1cm4geCBpZiBAaXNhIHgsIFAuLi5cbiAgICAgICMgICBtZXNzYWdlICAgPSBcIm5vdCBhIHZhbGlkICN7QGZ1bGxfbmFtZX06ICN7cnByIHh9XCJcbiAgICAgICMgICBtZXNzYWdlICArPSBcIiDigJMgI3tAZGF0YS5tZXNzYWdlfVwiIGlmIEBkYXRhLm1lc3NhZ2U/XG4gICAgICAjICAgdGhyb3cgbmV3IEVycm9yIG1lc3NhZ2VcblxuICAgICAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICBfZ2V0X3ZhbGlkYXRpb25fZmFpbHVyZV9tZXNzYWdlOiAoIHggKSAtPlxuICAgICAgICBSICAgPSBcIigje0BmdWxsX25hbWV9KSBub3QgYSB2YWxpZCAje0BmdWxsX25hbWV9OiAje3JwciB4fVwiXG4gICAgICAgIFIgICs9IFwiIOKAkyAje0BkYXRhLm1lc3NhZ2V9XCIgaWYgQGRhdGEubWVzc2FnZT9cbiAgICAgICAgcmV0dXJuIFJcblxuICAgICAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICBkbV92YWxpZGF0ZTogKCBkYXRhLCBtYXBwaW5nLCAgeCwgUC4uLiApIC0+XG4gICAgICAgIHJldHVybiB4IGlmIEBkbV9pc2EgZGF0YSwgbWFwcGluZywgeCwgUC4uLlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IgQF9nZXRfdmFsaWRhdGlvbl9mYWlsdXJlX21lc3NhZ2UgeFxuXG4gICAgICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgIHZhbGlkYXRlOiAoIHgsIFAuLi4gKSAtPlxuICAgICAgICByZXR1cm4geCBpZiBAaXNhIHgsIFAuLi5cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yIEBfZ2V0X3ZhbGlkYXRpb25fZmFpbHVyZV9tZXNzYWdlIHhcblxuICAgICAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICBhc3NpZ246ICggUC4uLiApIC0+IGNsZWFuX2Fzc2lnbiBAZGF0YSwgUC4uLlxuXG4gICAgICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgIGZhaWw6ICggbWVzc2FnZSwgUC4uLiApIC0+IGNsZWFuX2Fzc2lnbiBAZGF0YSwgeyBtZXNzYWdlLCB9LCBQLi4uOyBmYWxzZVxuXG5cbiAgICAjPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIGNsYXNzIFR5cGVzcGFjZVxuXG4gICAgICAjLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgIEBbQ0ZHXTogbnVsbFxuXG4gICAgICAjPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgIGNvbnN0cnVjdG9yOiAoIGNmZyA9IG51bGwgKSAtPlxuICAgICAgICBjbGFzeiAgID0gQGNvbnN0cnVjdG9yXG4gICAgICAgIEBbQ0ZHXSAgPSBmcmVlemUgY2xlYW5fYXNzaWduIHt9LCAoIGNsYXN6W0NGR10gPyB1bmRlZmluZWQgKSwgKCBjZmcgPyB1bmRlZmluZWQgKVxuICAgICAgICBmb3IgbmFtZSBpbiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyBjbGFzelxuICAgICAgICAgIGNsYXNzIFR5cGVjbGFzcyBleHRlbmRzIFR5cGVcbiAgICAgICAgICBuYW1laXQgbmFtZSwgVHlwZWNsYXNzXG4gICAgICAgICAgQFsgbmFtZSBdID0gbmV3IFR5cGVjbGFzcyBALCBuYW1lLCBpc2EgPSBjbGFzelsgbmFtZSBdXG4gICAgICAgIHJldHVybiB1bmRlZmluZWRcblxuICAgICM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgcmV0dXJuIGV4cG9ydHMgPSB7IFR5cGUsIFR5cGVzcGFjZSwgQ0ZHLCB9XG5cblxuXG4jPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbkJSSUNTLnJlcXVpcmVfbmFub3R5cGVzID0gQlJJQ1MucmVxdWlyZV9uYW5vdHlwZXNfdjJcbk9iamVjdC5hc3NpZ24gbW9kdWxlLmV4cG9ydHMsIEJSSUNTXG4iXX0=
